---
title: "International Airline Passengers"
subtitle: "Time Series Analysis "
author:
- name:"Theo Poupel"
date: "March 2024"
output:
  html_document:
    toc: true
    toc_float: true
---

```{r, echo=FALSE}
htmltools::img(src = knitr::image_uri("QMlogo.png"), 
               alt = 'logo', 
               style = 'position:absolute; top:0; right:0; padding:10px; width:20%;')
```

# Analysis of airline passengers 

The analysis of the monthly totals of international airline passengers from 1949 to 1960, will help us analyse how international air travel resumed after the Second World War. 

## The objective

By examining the monthly totals of passengers, we can uncover patterns, seasonal variations, and potential factors influencing passenger traffic. By using Meta's Prophet forecasting system we could understand future trends and predict future passenger traffic with higher accuracy, enabling better planning, resource allocation, and decision-making for the transportation industry.

## Analyse the Dataset

### Load dataset

We begin our modelling by loading and viewing the structure of the dataset. 

```{r}
data("AirPassengers")
str(AirPassengers)
```

We now have the information on monthly totals of international airline passengers from 1949 to 1960. 

### Graph the data

Visualizing the time series data highlights the historical trends and patterns of airline passengers.

```{r}
plot(AirPassengers, main = "International Airline Passengers")
```

The graph shows a clear upward trend in the number of international airline passengers from 1950 to 1960 with regular fluctuations that suggest a seasonal pattern.

```{r}
library(astsa)
plot(decompose(AirPassengers))
```

- OBSERVED: 
 
The top graph shows the original data as it was observed, without any decomposition. It appears to have both a trend and a seasonal pattern.
 
 - TREND: 
 
The second graph from the top represents the trend component, which shows how the data changes over a long period, ignoring seasonal variations and random fluctuations. The trend here is upwards, suggesting a general increase in the data values over time.

 - SEASONAL: 

The third graph shows the seasonal component, which captures the regular pattern that repeats over a known period, such as days, months, or quarters. This graph shows a clear and consistent cyclical pattern, indicating strong seasonality in the data.

 - RESIDUAL ERROR:

The bottom graph is labeled as random, it represents the noise in the data after the trend and seasonal components have been removed. It's what remains and is supposedly random or irregular fluctuations that cannot be attributed to the trend or seasonality.

## Use of Meta's Prophet forecasting system

Now we will use Prophet to identify trends and forecast future passenger numbers. For that we'll have to make our data work with Prophet forecasting tool. However, Prophet requires specific data formatting: a 'ds' column for time and a 'y' column for the number of passengers.

```{r}
library(prophet)
AirPassengers.df = data.frame(
  ds=zoo::as.yearmon(time(AirPassengers)),
y=AirPassengers)
m = prophet::prophet(AirPassengers.df)
```

### Select dates for forecasting

```{r}
f = prophet::make_future_dataframe(m, periods=20, freq="quarter")
```

With this we have indicated to Prophet that we wanted to visualise future dates spaced one quarter apart and that we're looking to predict 20 quarters into the future.

### Plotting future graph

```{r}
p = predict(m, f)
```

We have indicated to Prophet that we want it to predict based on the previously fitted model including all the parameters, trends, and seasonality that Prophet has identified in the data which is represented by m. And f stands for the future dates we precised. 

```{r}
plot(m,p)
```

The black dots plotted along the graph are the actual recorded numbers of international airline passengers each month over the period shown. These points show the actual historical data and their variations over time. The blue line represents the predicted values generated by Meta's Prophet forecasting model. Surrounding the blue line is a shaded blue area which represents the confidence interval for these predictions. The width of the shaded area indicates the level of uncertainty or variability in the predictions. A narrower band suggests more confidence in the prediction for that time point, while a wider band indicates less certainty. We can notice that based on past data, the blue line predicts a growth in the number of people who will be using air travel internationally in the future. 

## Conclusion 

The graph shows how time series forecasting in visualizing and predicting trends is useful, but it also highlights the need for caution. Predictions are based on past patterns and assumptions that may not stand due to unforeseen changes in the industry or global dynamics. Therefore, while the forecast is useful for planning, it should be one of several tools used in decision-making and improvement in the facilities such as airplanes in order to guarantee safety as passenger number increase.  
